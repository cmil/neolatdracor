{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "NeoLatDraCor Metadata",
  "type": "array",
  "items": {
    "type": "object",
    "properties": {
      "id": { "type": "string" },
      "name": { "type": "string" },
      "title": { "type": "string" },
      "subtitle": { "type": "string" },
      "qid": {
        "type": ["string", "null"]
      },
      "authors": {
        "type": "array",
        "items": {
          "type": "object",
          "oneOf": [
            { "required": ["name"] },
            { "required": ["forename", "surname"] }
          ],
          "properties": {
            "name": { "type": "string" },
            "forename": { "type": "string" },
            "surname": { "type": "string" },
            "qid": { "type": ["string", "null"] }
          }
        }
      },
      "yearPrinted": {
        "type": ["string", "null"]
      },
      "yearWritten": {
        "type": ["string", "null"]
      },
      "premiered": {
        "type": ["string", "null"]
      },
      "verse": { "type": "boolean" },
      "genre": { "type": ["string", "null"] },
      "genreQid": {
        "type": ["string", "null"]
      },
      "region": {
        "type": ["string", "null"]
      },
      "regionQid": {
        "type": ["string", "null"]
      },
      "project": { "type": ["string", "null"] },
      "status": { "type": "string" },
      "availability": {
        "type": "object",
        "properties": {
          "status": {
            "type": ["string", "null"]
          },
          "notes": {
            "type": ["string", "null"]
          }
        },
        "required": ["status"]
      },
      "licenseNotes": { "type": ["string", "null"] },
      "source": {
        "$ref": "#/definitions/source",
        "description": "Each entry needs one main source. Sources can be nested"
      },
      "transcription": {
        "type": ["object", "null"],
        "properties": {
          "by": { "type": ["string", "null"] },
          "supervisor": { "type": ["string", "null"] },
          "software": { "type": "string" }
        }
      },
      "funding": {
        "type": "object",
        "properties": {
          "organization": { "type": ["string", "null"] },
          "line": { "type": ["string", "null"] }
        }
      },
      "acknowledgements": {
        "type": "string"
      },
      "institution": {
        "type": "string"
      },
      "complete": {
        "type": "boolean"
      }
    },
    "required": [
      "id",
      "name",
      "title",
      "qid",
      "authors",
      "yearPrinted",
      "yearWritten",
      "premiered",
      "source",
      "verse",
      "genre",
      "genreQid",
      "region",
      "regionQid",
      "project",
      "status",
      "availability",
      "licenseNotes",
      "complete"
    ]
  },
  "definitions": {
    "source": {
      "type": "object",
      "anyOf": [{ "required": ["title"] }, { "required": ["url"] }],
      "properties": {
        "title": { "type": "string" },
        "url": { "type": "string" },
        "year": {
          "type": "string",
          "description": "Can be a regular year (e.g. '1789') or something like 'not before 1628, not after 1673'"
        },
        "editor": { "type": "string" },
        "type": {
          "type": "string",
          "enum": [
            "manuscript",
            "critical edition",
            "print",
            "TEI",
            "XML",
            "HTML",
            "TXT",
            "PDF",
            "DOCX"
          ]
        },
        "copyright": { "type": "string" },
        "availability": {
          "type": "object",
          "properties": {
            "licence": { "type": "string" },
            "licenceUrl": { "type": "string" },
            "note": { "type": "string" }
          }
        },
        "source": {
          "$ref": "#/definitions/source",
          "description": "A source can be based on another source."
        }
      }
    }
  }
}
